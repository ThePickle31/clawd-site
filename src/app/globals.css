@import "tailwindcss";
@import "tw-animate-css";
@plugin "@tailwindcss/typography";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
  --color-coral: #FF6B4A;
  --color-coral-dark: #E55A3A;
  --color-ocean-deep: #0A1628;
  --color-ocean-mid: #0F2847;
  --color-ocean-light: #1A3A5C;
  --color-cream: #FFF8F0;
}

:root {
  --radius: 0.625rem;
  /* Dark mode colors (permanent) */
  --background: #0A1628;
  --foreground: #FFF8F0;
  --card: #0F2847;
  --card-foreground: #FFF8F0;
  --popover: #0F2847;
  --popover-foreground: #FFF8F0;
  --primary: #FF6B4A;
  --primary-foreground: #FFFFFF;
  --secondary: #1A3A5C;
  --secondary-foreground: #FFF8F0;
  --muted: #1A3A5C;
  --muted-foreground: #A0AEC0;
  --accent: #1A3A5C;
  --accent-foreground: #FFF8F0;
  --destructive: #EF4444;
  --border: rgba(255, 248, 240, 0.1);
  --input: rgba(255, 248, 240, 0.15);
  --ring: #FF6B4A;
  --chart-1: #FF6B4A;
  --chart-2: #4A90A4;
  --chart-3: #6BB3C0;
  --chart-4: #8DD4E0;
  --chart-5: #B0E8F0;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
    cursor: url('/lobster-claw-open.svg') 16 4, auto;
  }
  body {
    @apply bg-background text-foreground;
  }
  a, button, [role="button"], input[type="submit"], input[type="button"],
  [onclick], .clickable, [data-clickable], summary, label[for],
  input[type="checkbox"], input[type="radio"], select, [tabindex]:not([tabindex="-1"]) {
    cursor: url('/lobster-claw-pinch.svg') 16 4, pointer;
  }
}

/* ── Bioluminescent Text Selection ─────────────────────────────────────
   When text is selected, it glows with the soft cyan-teal light of
   deep-sea bioluminescence — like the flash of a startled ctenophore
   or the gentle pulse of a drifting jellyfish bell.                      */

::selection {
  background-color: rgba(78, 205, 196, 0.35);
  color: #E0FFFC;
  text-shadow:
    0 0 1px rgba(126, 219, 207, 0.8),
    0 0 2px rgba(78, 205, 196, 0.4);
}

::-moz-selection {
  background-color: rgba(78, 205, 196, 0.35);
  color: #E0FFFC;
}

/* Code block styling */
pre {
  @apply rounded-lg p-4 overflow-x-auto;
}

code {
  @apply font-mono text-sm;
}

/* ── Abyssal Syntax — ocean-inspired highlight.js theme ──────────────── */
/* Colors drawn from the deep-sea palette: bioluminescent teals, coral    */
/* accents, jellyfish violets, and the soft blue light that filters down  */
/* through hundreds of meters of open water.                              */

.hljs {
  background: #0B1929;
  color: #C8D6E5;
}

/* Comments — the quiet hum of distant currents */
.hljs-comment,
.hljs-quote {
  color: #4A6B8A;
  font-style: italic;
}

/* Keywords — coral reef punctuation */
.hljs-keyword,
.hljs-selector-tag {
  color: #FF6B4A;
}

/* Strings — bioluminescent teal glow */
.hljs-string,
.hljs-doctag,
.hljs-regexp {
  color: #7EDBCF;
}

/* Numbers & literals — jellyfish violet */
.hljs-number,
.hljs-literal {
  color: #C4A7E7;
}

/* Booleans & constants — brighter violet */
.hljs-meta .hljs-meta-string {
  color: #D4BFFF;
}

/* Function names & titles — the blue light from above */
.hljs-title,
.hljs-title.function_,
.hljs-section,
.hljs-name {
  color: #5BB8F5;
}

/* Types & classes — tropical teal water */
.hljs-type,
.hljs-title.class_,
.hljs-selector-class,
.hljs-selector-id {
  color: #4ECDC4;
}

/* Attributes — warm sand amber */
.hljs-attribute,
.hljs-attr {
  color: #F0B27A;
}

/* Variables & template expressions — seafoam */
.hljs-variable,
.hljs-template-variable {
  color: #87CEAB;
}

/* Built-ins — lighter coral glow */
.hljs-built_in {
  color: #FF8C6B;
}

/* Symbols, bullets, links — muted teal */
.hljs-symbol,
.hljs-bullet,
.hljs-link {
  color: #5FB3A1;
}

/* Meta & preprocessor — blue-grey sediment */
.hljs-meta,
.hljs-meta .hljs-keyword {
  color: #8B9FC0;
}

/* Selector attributes & pseudo-elements */
.hljs-selector-attr,
.hljs-selector-pseudo {
  color: #7EDBCF;
}

/* Tags (HTML/XML) — coral accent */
.hljs-tag {
  color: #C8D6E5;
}

/* Additions (diffs) — bioluminescent green */
.hljs-addition {
  color: #7EDBCF;
  background: rgba(126, 219, 207, 0.08);
}

/* Deletions (diffs) — faded coral */
.hljs-deletion {
  color: #FF6B4A;
  background: rgba(255, 107, 74, 0.08);
}

/* Emphasis & strong */
.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: 700;
}

/* Subst (template interpolation) */
.hljs-subst {
  color: #C8D6E5;
}

/* Params — dimmer text for function parameters */
.hljs-params {
  color: #A0B4C8;
}

/* Property — warm teal for object properties */
.hljs-property {
  color: #4ECDC4;
}

/* Punctuation — subtle, like sand between stones */
.hljs-punctuation {
  color: #6B8299;
}

/* ── Code block ambient styling ──────────────────────────────────────── */
/* Subtle border glow to suggest a different depth zone                   */

pre:has(.hljs) {
  background: #0B1929;
  border: 1px solid rgba(94, 179, 161, 0.12);
  box-shadow:
    0 0 20px rgba(10, 22, 40, 0.5),
    inset 0 1px 0 rgba(126, 219, 207, 0.04);
}

/* Language label for code blocks */
.code-block-wrapper {
  position: relative;
}

.code-block-wrapper pre[class*="language-"]::before,
.code-block-wrapper pre .hljs[class*="language-"]::before {
  content: attr(class);
  position: absolute;
  top: 0;
  right: 2.5rem;
  padding: 0.15rem 0.5rem;
  font-size: 0.65rem;
  font-family: var(--font-geist-mono);
  color: #4A6B8A;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  pointer-events: none;
}

/* Prose styling for MDX */
.prose {
  @apply max-w-none;
}

.prose h1, .prose h2, .prose h3, .prose h4 {
  @apply font-bold;
}

.prose a {
  @apply text-primary hover:underline;
}

.prose code {
  @apply bg-muted px-1.5 py-0.5 rounded;
}

.prose pre code {
  @apply bg-transparent p-0;
}

/* Extra spacing for readability */
.prose p {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}

.prose h2 {
  margin-top: 2.5em;
  margin-bottom: 1em;
}

.prose h3 {
  margin-top: 2em;
  margin-bottom: 0.75em;
}

.prose blockquote {
  margin-top: 2em;
  margin-bottom: 2em;
}

.prose ul, .prose ol {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}

.prose li {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

.prose hr {
  margin-top: 3em;
  margin-bottom: 3em;
}

.prose pre {
  margin-top: 2em;
  margin-bottom: 2em;
}

/* Tidal theme ambient effects */
.tidal-hero-glow {
  background: radial-gradient(
    ellipse 80% 60% at 50% 40%,
    rgba(var(--tidal-glow, 0, 180, 160), 0.04) 0%,
    transparent 70%
  );
}

/* Subtle tidal glow on nav hover */
.tidal-nav-hover:hover {
  text-shadow: 0 0 12px rgba(var(--tidal-glow, 255, 107, 74), 0.3);
}

/* Sonar ping — radial pulse on hover like echolocation */
@keyframes sonar-ping {
  0% {
    transform: scale(0.5);
    opacity: 0.4;
  }
  100% {
    transform: scale(2.5);
    opacity: 0;
  }
}

.sonar-ping {
  position: relative;
  overflow: visible;
}

.sonar-ping::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 100%;
  aspect-ratio: 1;
  translate: -50% -50%;
  border-radius: 50%;
  border: 1.5px solid rgba(var(--tidal-glow, 255, 107, 74), 0.35);
  opacity: 0;
  pointer-events: none;
  transform: scale(0.5);
}

.sonar-ping:hover::before {
  animation: sonar-ping 0.8s ease-out forwards;
}

/* Floating particles — CSS animation runs on compositor thread (off main thread) */
@keyframes particle-float {
  0%, 100% {
    translate: 0 0;
    opacity: 0.2;
  }
  50% {
    translate: 0 var(--y-offset);
    opacity: 0.8;
  }
}

.particle-float {
  will-change: translate, opacity;
  animation: particle-float linear infinite alternate;
  background-color: rgba(var(--tidal-glow, 255, 107, 74), 0.2);
}

/* Gradient text animation */
@keyframes gradient-shift {
  0% {
    background-position: 0% center;
  }
  100% {
    background-position: 200% center;
  }
}

.animate-gradient {
  animation: gradient-shift 4s ease-in-out infinite;
}

/* Idle Ocean Current Drift — gentle sway as if floating in ocean currents */
@keyframes ocean-current-drift {
  0%, 100% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(1px);
  }
  75% {
    transform: translateX(-1px);
  }
}

.ocean-current-drifting {
  animation: ocean-current-drift 6s ease-in-out infinite;
  will-change: transform;
}

@media (prefers-reduced-motion: reduce) {
  .ocean-current-drifting {
    animation: none;
  }
}

/* ── Morse Code Beacon ───────────────────────────────────────────────────
   A subtle lighthouse that blinks morse code messages in the footer.
   Messages cycle: AHOY → SOS → CLAWD → LOBSTER

   Morse timing (1 unit = 100ms = 0.463% of 21.6s animation):
   - Dot: 1 unit on     - Dash: 3 units on
   - Element gap: 1 unit off
   - Letter gap: 3 units off  - Word gap: 7 units off

   Total: 216 units = 21.6 seconds                                         */

@keyframes morse-beacon {
  /* === AHOY (A: .- H: .... O: --- Y: -.--) === */
  /* A: dot */
  0%, 0.46% { opacity: 1; }
  0.46%, 0.93% { opacity: 0.3; }
  /* A: dash */
  0.93%, 2.31% { opacity: 1; }
  2.31%, 3.70% { opacity: 0.3; }
  /* H: dot dot dot dot */
  3.70%, 4.17% { opacity: 1; }
  4.17%, 4.63% { opacity: 0.3; }
  4.63%, 5.09% { opacity: 1; }
  5.09%, 5.56% { opacity: 0.3; }
  5.56%, 6.02% { opacity: 1; }
  6.02%, 6.48% { opacity: 0.3; }
  6.48%, 6.94% { opacity: 1; }
  6.94%, 8.33% { opacity: 0.3; }
  /* O: dash dash dash */
  8.33%, 9.72% { opacity: 1; }
  9.72%, 10.19% { opacity: 0.3; }
  10.19%, 11.57% { opacity: 1; }
  11.57%, 12.04% { opacity: 0.3; }
  12.04%, 13.43% { opacity: 1; }
  13.43%, 14.81% { opacity: 0.3; }
  /* Y: dash dot dash dash */
  14.81%, 16.20% { opacity: 1; }
  16.20%, 16.67% { opacity: 0.3; }
  16.67%, 17.13% { opacity: 1; }
  17.13%, 17.59% { opacity: 0.3; }
  17.59%, 18.98% { opacity: 1; }
  18.98%, 19.44% { opacity: 0.3; }
  19.44%, 20.83% { opacity: 1; }
  20.83%, 24.07% { opacity: 0.3; }

  /* === SOS (S: ... O: --- S: ...) === */
  /* S: dot dot dot */
  24.07%, 24.54% { opacity: 1; }
  24.54%, 25.00% { opacity: 0.3; }
  25.00%, 25.46% { opacity: 1; }
  25.46%, 25.93% { opacity: 0.3; }
  25.93%, 26.39% { opacity: 1; }
  26.39%, 27.78% { opacity: 0.3; }
  /* O: dash dash dash */
  27.78%, 29.17% { opacity: 1; }
  29.17%, 29.63% { opacity: 0.3; }
  29.63%, 31.02% { opacity: 1; }
  31.02%, 31.48% { opacity: 0.3; }
  31.48%, 32.87% { opacity: 1; }
  32.87%, 34.26% { opacity: 0.3; }
  /* S: dot dot dot + word gap */
  34.26%, 34.72% { opacity: 1; }
  34.72%, 35.19% { opacity: 0.3; }
  35.19%, 35.65% { opacity: 1; }
  35.65%, 36.11% { opacity: 0.3; }
  36.11%, 36.57% { opacity: 1; }
  36.57%, 39.81% { opacity: 0.3; }

  /* === CLAWD (C: -.-. L: .-.. A: .- W: .-- D: -..) === */
  /* C: dash dot dash dot */
  39.81%, 41.20% { opacity: 1; }
  41.20%, 41.67% { opacity: 0.3; }
  41.67%, 42.13% { opacity: 1; }
  42.13%, 42.59% { opacity: 0.3; }
  42.59%, 43.98% { opacity: 1; }
  43.98%, 44.44% { opacity: 0.3; }
  44.44%, 44.91% { opacity: 1; }
  44.91%, 46.30% { opacity: 0.3; }
  /* L: dot dash dot dot */
  46.30%, 46.76% { opacity: 1; }
  46.76%, 47.22% { opacity: 0.3; }
  47.22%, 48.61% { opacity: 1; }
  48.61%, 49.07% { opacity: 0.3; }
  49.07%, 49.54% { opacity: 1; }
  49.54%, 50.00% { opacity: 0.3; }
  50.00%, 50.46% { opacity: 1; }
  50.46%, 51.85% { opacity: 0.3; }
  /* A: dot dash */
  51.85%, 52.31% { opacity: 1; }
  52.31%, 52.78% { opacity: 0.3; }
  52.78%, 54.17% { opacity: 1; }
  54.17%, 55.56% { opacity: 0.3; }
  /* W: dot dash dash */
  55.56%, 56.02% { opacity: 1; }
  56.02%, 56.48% { opacity: 0.3; }
  56.48%, 57.87% { opacity: 1; }
  57.87%, 58.33% { opacity: 0.3; }
  58.33%, 59.72% { opacity: 1; }
  59.72%, 61.11% { opacity: 0.3; }
  /* D: dash dot dot + word gap */
  61.11%, 62.50% { opacity: 1; }
  62.50%, 62.96% { opacity: 0.3; }
  62.96%, 63.43% { opacity: 1; }
  63.43%, 63.89% { opacity: 0.3; }
  63.89%, 64.35% { opacity: 1; }
  64.35%, 67.59% { opacity: 0.3; }

  /* === LOBSTER (L: .-.. O: --- B: -... S: ... T: - E: . R: .-.) === */
  /* L: dot dash dot dot */
  67.59%, 68.06% { opacity: 1; }
  68.06%, 68.52% { opacity: 0.3; }
  68.52%, 69.91% { opacity: 1; }
  69.91%, 70.37% { opacity: 0.3; }
  70.37%, 70.83% { opacity: 1; }
  70.83%, 71.30% { opacity: 0.3; }
  71.30%, 71.76% { opacity: 1; }
  71.76%, 73.15% { opacity: 0.3; }
  /* O: dash dash dash */
  73.15%, 74.54% { opacity: 1; }
  74.54%, 75.00% { opacity: 0.3; }
  75.00%, 76.39% { opacity: 1; }
  76.39%, 76.85% { opacity: 0.3; }
  76.85%, 78.24% { opacity: 1; }
  78.24%, 79.63% { opacity: 0.3; }
  /* B: dash dot dot dot */
  79.63%, 81.02% { opacity: 1; }
  81.02%, 81.48% { opacity: 0.3; }
  81.48%, 81.94% { opacity: 1; }
  81.94%, 82.41% { opacity: 0.3; }
  82.41%, 82.87% { opacity: 1; }
  82.87%, 83.33% { opacity: 0.3; }
  83.33%, 83.80% { opacity: 1; }
  83.80%, 85.19% { opacity: 0.3; }
  /* S: dot dot dot */
  85.19%, 85.65% { opacity: 1; }
  85.65%, 86.11% { opacity: 0.3; }
  86.11%, 86.57% { opacity: 1; }
  86.57%, 87.04% { opacity: 0.3; }
  87.04%, 87.50% { opacity: 1; }
  87.50%, 88.89% { opacity: 0.3; }
  /* T: dash */
  88.89%, 90.28% { opacity: 1; }
  90.28%, 91.67% { opacity: 0.3; }
  /* E: dot */
  91.67%, 92.13% { opacity: 1; }
  92.13%, 93.52% { opacity: 0.3; }
  /* R: dot dash dot + end gap */
  93.52%, 93.98% { opacity: 1; }
  93.98%, 94.44% { opacity: 0.3; }
  94.44%, 95.83% { opacity: 1; }
  95.83%, 96.30% { opacity: 0.3; }
  96.30%, 96.76% { opacity: 1; }
  96.76%, 100% { opacity: 0.3; }
}

.morse-beacon {
  color: var(--muted-foreground);
  animation: morse-beacon 21.6s linear infinite;
  transition: color 0.1s ease;
}

/* Glow effect when "on" — using opacity threshold */
.morse-beacon svg {
  filter: drop-shadow(0 0 0px transparent);
  transition: filter 0.05s ease;
}

/* The light room and beams glow when on */
.morse-beacon .morse-light {
  fill: currentColor;
  transition: fill 0.05s ease;
}

.morse-beacon .morse-beam {
  stroke-opacity: 0;
  transition: stroke-opacity 0.05s ease;
}

/* When fully visible (opacity ~1), add the glow */
@keyframes morse-glow {
  0%, 0.46%, 0.93%, 2.31%, 3.70%, 4.17%, 4.63%, 5.09%, 5.56%, 6.02%, 6.48%, 6.94%,
  8.33%, 9.72%, 10.19%, 11.57%, 12.04%, 13.43%, 14.81%, 16.20%, 16.67%, 17.13%,
  17.59%, 18.98%, 19.44%, 20.83%, 24.07%, 24.54%, 25.00%, 25.46%, 25.93%, 26.39%,
  27.78%, 29.17%, 29.63%, 31.02%, 31.48%, 32.87%, 34.26%, 34.72%, 35.19%, 35.65%,
  36.11%, 36.57%, 39.81%, 41.20%, 41.67%, 42.13%, 42.59%, 43.98%, 44.44%, 44.91%,
  46.30%, 46.76%, 47.22%, 48.61%, 49.07%, 49.54%, 50.00%, 50.46%, 51.85%, 52.31%,
  52.78%, 54.17%, 55.56%, 56.02%, 56.48%, 57.87%, 58.33%, 59.72%, 61.11%, 62.50%,
  62.96%, 63.43%, 63.89%, 64.35%, 67.59%, 68.06%, 68.52%, 69.91%, 70.37%, 70.83%,
  71.30%, 71.76%, 73.15%, 74.54%, 75.00%, 76.39%, 76.85%, 78.24%, 79.63%, 81.02%,
  81.48%, 81.94%, 82.41%, 82.87%, 83.33%, 83.80%, 85.19%, 85.65%, 86.11%, 86.57%,
  87.04%, 87.50%, 88.89%, 90.28%, 91.67%, 92.13%, 93.52%, 93.98%, 94.44%, 95.83%,
  96.30%, 96.76% {
    filter: drop-shadow(0 0 4px rgba(255, 200, 100, 0.6));
    color: #FFD700;
  }
}

/* Use a simpler approach: CSS variable toggle */
.morse-beacon:hover {
  color: var(--primary);
}

@media (prefers-reduced-motion: reduce) {
  .morse-beacon {
    animation: none;
    opacity: 0.5;
  }
}

/* ── Underwater Light Rays (Crepuscular Rays) ────────────────────────────
   Subtle shafts of sunlight filtering down from the surface, swaying
   gently as if refracted through moving water. These fade as you scroll
   deeper — less light reaches the ocean depths.                           */

@keyframes light-ray-sway {
  0%, 100% {
    transform: rotate(var(--ray-angle)) translateX(0);
  }
  50% {
    transform: rotate(var(--ray-angle)) translateX(20px);
  }
}

.light-ray {
  animation: light-ray-sway ease-in-out infinite;
  will-change: transform;
}

@media (prefers-reduced-motion: reduce) {
  .light-ray {
    animation: none;
  }
}
